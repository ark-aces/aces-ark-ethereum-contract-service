# ACES Ark to Ethereum Smart Contract service

ACES ARK to Ethereum Smart Contract service

## Run Application

Run application:

```
mvn spring-boot:run
```


## Using Service

Get service info:

```bash
curl http://localhost:9192/
```


Create a new Service Contract:

```bash
curl -X POST localhost:9192/contracts \
-H 'Content-type: application/json' \
-d '{
  "arguments": {
    "contractAbiJson": "[{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"greet\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_greeting\",\"type\":\"string\"}],\"payable\":false,\"type\":\"constructor\"}]",
    "contractCode": "0x6060604052341561000c57fe5b604051610309380380610309833981016040528051015b5b60008054600160a060020a03191633600160a060020a03161790555b805161005390600190602084019061005b565b505b506100fb565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009c57805160ff19168380011785556100c9565b828001600101855582156100c9579182015b828111156100c95782518255916020019190600101906100ae565b5b506100d69291506100da565b5090565b6100f891905b808211156100d657600081556001016100e0565b5090565b90565b6101ff8061010a6000396000f300606060405263ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166341c0e1b58114610045578063cfae321714610057575bfe5b341561004d57fe5b6100556100e7565b005b341561005f57fe5b610067610129565b6040805160208082528351818301528351919283929083019185019080838382156100ad575b8051825260208311156100ad57601f19909201916020918201910161008d565b505050905090810190601f1680156100d95780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000543373ffffffffffffffffffffffffffffffffffffffff908116911614156101265760005473ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b6101316101c1565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156101b65780601f1061018b576101008083540402835291602001916101b6565b820191906000526020600020905b81548152906001019060200180831161019957829003601f168201915b505050505090505b90565b604080516020810190915260008152905600a165627a7a72305820b154245e7f22720ca720fbac9e63d3f11289c0b6a9c0d71d46602a0f1ec41b440029",
    "gasLimit": 500000
  }
}' 
```

```json
{
    "id": "HO5YRWbB0MwbCVOKN32S",
    "createdAt": "2018-01-30T23:49:55.986Z",
    "expiresAt": "2018-01-31T00:49:55.986Z",
    "status": "pendingPayment",
    "results": {
        "contractAbiJson": "[{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"greet\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_greeting\",\"type\":\"string\"}],\"payable\":false,\"type\":\"constructor\"}]",
        "contractCode": "0x6060604052341561000c57fe5b604051610309380380610309833981016040528051015b5b60008054600160a060020a03191633600160a060020a03161790555b805161005390600190602084019061005b565b505b506100fb565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009c57805160ff19168380011785556100c9565b828001600101855582156100c9579182015b828111156100c95782518255916020019190600101906100ae565b5b506100d69291506100da565b5090565b6100f891905b808211156100d657600081556001016100e0565b5090565b90565b6101ff8061010a6000396000f300606060405263ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166341c0e1b58114610045578063cfae321714610057575bfe5b341561004d57fe5b6100556100e7565b005b341561005f57fe5b610067610129565b6040805160208082528351818301528351919283929083019185019080838382156100ad575b8051825260208311156100ad57601f19909201916020918201910161008d565b505050905090810190601f1680156100d95780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000543373ffffffffffffffffffffffffffffffffffffffff908116911614156101265760005473ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b6101316101c1565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156101b65780601f1061018b576101008083540402835291602001916101b6565b820191906000526020600020905b81548152906001019060200180831161019957829003601f168201915b505050505090505b90565b604080516020810190915260008152905600a165627a7a72305820b154245e7f22720ca720fbac9e63d3f11289c0b6a9c0d71d46602a0f1ec41b440029",
        "gasLimit": 500000,
        "arkSmartBridge": "7c4d262e-e80a-4a18-b541-12c570e3a48e",
        "serviceArkAddress": "ARNJJruY6RcuYCXcwWsu4bx9kyZtntqeAx",
        "arkPerEthExchangeRate": 199.59,
        "estimatedGasCost": 229410,
        "estimatedEthCost": 0.0045882,
        "arkFlatFee": 0,
        "arkFeePercent": 1,
        "arkFeeTotal": 0.01831518,
        "requiredArk": 0.93407402,
        "deploymentArkCost": 0.91575884
    }
}
```

Get Contract information after sending ARK funds to `serviceArkAddress` and `arkSmartBridge`:

```bash
curl -X GET http://localhost:9192/contracts/HO5YRWbB0MwbCVOKN32S
```

```json
{
    "id": "HO5YRWbB0MwbCVOKN32S",
    "createdAt": "2018-01-30T23:49:55.986Z",
    "expiresAt": "2018-01-31T00:49:55.986Z",
    "status": "executed",
    "results": {
        "contractAbiJson": "[{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"greet\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_greeting\",\"type\":\"string\"}],\"payable\":false,\"type\":\"constructor\"}]",
        "contractCode": "0x6060604052341561000c57fe5b604051610309380380610309833981016040528051015b5b60008054600160a060020a03191633600160a060020a03161790555b805161005390600190602084019061005b565b505b506100fb565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009c57805160ff19168380011785556100c9565b828001600101855582156100c9579182015b828111156100c95782518255916020019190600101906100ae565b5b506100d69291506100da565b5090565b6100f891905b808211156100d657600081556001016100e0565b5090565b90565b6101ff8061010a6000396000f300606060405263ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166341c0e1b58114610045578063cfae321714610057575bfe5b341561004d57fe5b6100556100e7565b005b341561005f57fe5b610067610129565b6040805160208082528351818301528351919283929083019185019080838382156100ad575b8051825260208311156100ad57601f19909201916020918201910161008d565b505050905090810190601f1680156100d95780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000543373ffffffffffffffffffffffffffffffffffffffff908116911614156101265760005473ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b6101316101c1565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156101b65780601f1061018b576101008083540402835291602001916101b6565b820191906000526020600020905b81548152906001019060200180831161019957829003601f168201915b505050505090505b90565b604080516020810190915260008152905600a165627a7a72305820b154245e7f22720ca720fbac9e63d3f11289c0b6a9c0d71d46602a0f1ec41b440029",
        "gasLimit": 500000,
        "arkSmartBridge": "7c4d262e-e80a-4a18-b541-12c570e3a48e",
        "serviceArkAddress": "ARNJJruY6RcuYCXcwWsu4bx9kyZtntqeAx",
        "returnArkAddress": "1442441bbf4ef8b936038873ff8f96d1383ec35053e4ceaa602a0715968e63bb",
        "arkPerEthExchangeRate": 199.59,
        "estimatedGasCost": 229410,
        "estimatedEthCost": 0,
        "arkFlatFee": 0,
        "arkFeePercent": 1,
        "arkFeeTotal": 0.02,
        "requiredArk": 0.93,
        "arkPaymentTransactionId": "924e9fe31fe2e73b19f828abe749a65cbf4348075e682211d24efbb1224cc25e",
        "arkPaymentAmount": 2,
        "deploymentArkCost": 0.92,
        "returnArkAmount": 1.07,
        "ethContractTransactionId": "0x798f610c7eefce1ca5a9fdbce845a337c4716e7af945b4048aff9f676803bfff"
    }
}
```
